var red = [172/255, 32/255, 32/255, 1];
var black = [50/255, 43/255,51/255, 1];

var map_size = 32;

var g_map = [
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11],
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11],
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 11, 1, 1, 11, 11, 11],
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 11, 1, 1, 11, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 1, 1, 11, 11, 11], 
    [11, 11, 1, 1, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11, 1, 11, 11, 11, 1, 1, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 11], 
    [11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 1, 11, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 11, 11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 1, 1, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11, 11, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11, 11, 11, 1, 1, 11, 11], 
    [11, 11, 1, 11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 1, 1, 11, 11, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 11, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11, 11, 11, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11, 11, 11, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 11, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 11, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 11, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 11, 11, 11, 1, 1, 1, 1, 1, 1, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11], 
    [11, 11, 1, 1, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 11, 11],
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 1, 1, 11, 11], 
    [11, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11],
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 11],
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11],
    [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 1, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11]
];

let g_worldPieces = []

function drawMap() {
    for (let x = 0; x < 32; x++) {
        for (let z = 0; z < 32; z += 1) {
            const height = g_map[x][z];
            for (let y = 0; y < height; y++) {
                if (y > 0) {
                    setBlock(x, y, z, red);
                } else {
                    setBlock(x, y, z, black);
                }
            }
        }
    }
}

function getIndex(x, y, z) {
    return ((z * 32 * 32) + (y * 32) + x) + 2;
}

function setBlock(x, y, z, color) {
    if(g_worldPieces[getIndex(x,y,z)]) {
      return;
    }

    var body = new Cube();
    body.matrix.setIdentity();
    body.color = color;
    body.matrix.translate(x-16, y-34, z-16);
    g_worldPieces[getIndex(x, y, z)] = body;
}

function renderWorld() {
    for(let cube of g_worldPieces) {
      if(cube) {
        cube.render();
      }
    }
}

